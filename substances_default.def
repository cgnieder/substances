% ----------------------------------------------------------------------------
% substances: default style
\RequirePackage { chemfig , siunitx }

% ----------------------------------------------------------------------------
% helper functions for the GHS properties:
\cs_new:Npn \substances_get_pics:n #1
  {
    \int_zero:N \l_tmpa_int
    \clist_map_inline:nn { #1 }
      {
        \int_incr:N \l_tmpa_int
        \int_compare:nF { \l_tmpa_int = 1 } { ~ }
        \ghspic{##1}
      }
  }

\cs_new:Npn \substances_get_ghs:nn #1#2
  {
    \int_zero:N \l_tmpa_int
    \clist_map_inline:nn { #2 }
      {
        \int_incr:N \l_tmpa_int
        \int_compare:nF { \l_tmpa_int = 1 }
          { \bool_if:NT \l_ghsystem_hide_statement_bool { , } ~ }
        \ghs{#1}{##1}
      }
  }

% ----------------------------------------------------------------------------
\DeclareSubstanceProperty  { formula }    [\ch]
\DeclareSubstanceProperty  { structure }  [\chemfig]
\DeclareSubstanceProperty  { mass }       [\SI][{\MolMass}]
\DeclareSubstanceProperty  { bp }         [\SI][{\celsius}]
\DeclareSubstanceProperty  { mp }         [\SI][{\celsius}]
\DeclareSubstanceProperty  { density }    [\SI][{\gram\per\cmc}]
\DeclareSubstanceProperty  { phase }
\DeclareSubstanceProperty  {pKa}          [\num]
\DeclareSubstanceProperty  {pKa1}         [\num]
\DeclareSubstanceProperty  {pKa2}         [\num]
\DeclareSubstanceProperty  {pKb}          [\num]
\DeclareSubstanceProperty  {pKb1}         [\num]
\DeclareSubstanceProperty  {pKb2}         [\num]
\DeclareSubstanceProperty  { pictograms } [\substances_get_pics:n]
\DeclareSubstanceProperty  { H }          [\substances_get_ghs:nn{H}]
\DeclareSubstanceProperty  { P }          [\substances_get_ghs:nn{P}]
\DeclareSubstanceProperty  { EUH }        [\substances_get_ghs:nn{EUH}]
\DeclareSubstanceProperty  {LD50}         [\SI][{\milli\gram\per\kilo\gram}]

\tex_endinput:D